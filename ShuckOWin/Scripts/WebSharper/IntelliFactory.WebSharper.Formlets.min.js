(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3;$.Define($$,{IntelliFactory:{WebSharper:{Formlets:{Body:$.Class({},{New:function(_4,_5){return $.New(c,{Element:_4,Label:_5});}}),Controls:{Button:function(_6){var _7;_7=function(){return f.Button(g.ofArray([f.Text(_6)]));};return h.ElementButton(_7);},Checkbox:function(_9){return h.CheckboxControl(false,_9);},CheckboxControl:function(_,ba){var bb;bb=function(){var bd,be,bf,bg,bh,bi,bj,bp,bq,br,bs,bt,bu,bv;bd=j.New($.New(m,{$:0,$0:ba}));if(_){bg=f.Attr();bf=g.ofArray([bg.NewAttr("disabled","disabled")]);}else{bf=$.New(n,{$:0});}be=bf;bi=f.Attr();bh=o.add(f.Input(g.ofArray([bi.NewAttr("type","checkbox"),f.Attr().Class("inputCheckbox")])),be);bj=function(bk){return function(){var bm,bn,bo;if(!_){bn=p(bk.get_Body()).prop("checked");bo=$.New(m,{$:0,$0:bn});bm=bd.Trigger(bo);}else{bm=null;}return bm;};};q.Events().OnClick(bj,bh);bp=bh;if(ba){br=bp["HtmlProvider@33"];bs=bp.get_Body();bq=br.SetAttribute(bs,"defaultChecked","true");}else{bt=bp["HtmlProvider@33"];bu=bp.get_Body();bq=bt.RemoveAttribute(bu,"checked");}bv=function(){var bx,by,bz,bA,bB,bC,bD;if(ba){by=bp["HtmlProvider@33"];bz=bp.get_Body();bx=by.SetProperty(bz,"checked",true);}else{bA=bp["HtmlProvider@33"];bB=bp.get_Body();bA.RemoveAttribute(bB,"checked");bC=bp["HtmlProvider@33"];bD=bp.get_Body();bx=bC.SetProperty(bD,"checked",false);}return bd.Trigger($.New(m,{$:0,$0:ba}));};bv(null);return[bp,bv,bd];};return r.MkFormlet(bb);},CheckboxGroup:function(bD){return h.CheckboxGroupControl(false,bD);},CheckboxGroupControl:function(bE,bF){var bG,bU,bV,bW,b0;bG=$.Tupled(function(bH){var bI,bJ,bK,bL,bM,bQ,bR,bT;bI=bH[0];bJ=bH[1];bK=bH[2];bL=h.CheckboxControl(bE,bK);bM=function(){var bO,bP;bO=g.ofArray([f.Text(bI)]);bP=f.Tags();return bP.NewTag("label",bO);};bQ={$:1,$0:bM};bR=function(bS){return[bS,bJ];};bT=s.WithLabel(bQ,bL);return s.Map(bR,bT);});bU=g.map(bG,bF);bV=s.Sequence(bU);bW=$.Tupled(function(bX){var bY,bZ;bY=bX[0];bZ=bX[1];return bY?{$:1,$0:bZ}:{$:0};});b0=function(b1){return g.choose(bW,b1);};return s.Map(b0,bV);},ElementButton:function(b2){var b3;b3=function(){var b5,b6,b7,b8,b$,ca;b5=j.New($.New(m,{$:1,$0:$.New(n,{$:0})}));b6={contents:0};b7=b2(null);b8=function(){return function(){b5.Trigger($.New(m,{$:0,$0:b6.contents}));return t.Increment(b6);};};q.Events().OnClick(b8,b7);b$=b7;ca=function(){b6.contents=0;return b5.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));};return[b$,ca,b5];};return r.MkFormlet(b3);},Input:function(cc){return h.InputField(false,"text",u.InputTextClass(),cc);},InputControl:function(cd,ce){var cf;cf=function(){var ch,ci,cj;ch=j.New($.New(m,{$:0,$0:cd}));ci=ce(ch);ci.set_Value(cd);cj=function(){ci.set_Value(cd);return ch.Trigger($.New(m,{$:0,$0:cd}));};return[ci,cj,ch];};return r.MkFormlet(cf);},InputField:function(cl,cm,cn,co){return h.InputControl(co,function(cp){var cq,cr,cs,ct,cu,cv,cw,cx;if(cl){cs=f.Attr();cr=g.ofArray([cs.NewAttr("readonly","readonly")]);}else{cr=$.New(n,{$:0});}cq=cr;cu=f.Attr();ct=g.ofArray([cu.NewAttr("type",cm),f.Attr().Class(cn)]);cv=g.append(ct,cq);cw=f.Input(cv);cx=function(){return!cl?cp.Trigger($.New(m,{$:0,$0:cw.get_Value()})):null;};h.OnTextChange(cx,cw);return cw;});},OnTextChange:function(cz,cA){var cB,cC,cF,cH;cB={contents:cA.get_Value()};cC=function(){var cE;if(cA.get_Value()!==cB.contents){cB.contents=cA.get_Value();cE=cz(null);}else{cE=null;}return cE;};cF=function(){return cC(null);};q.Events().OnChange(cF,cA);cH=function(){return function(){return cC(null);};};q.Events().OnKeyUp(cH,cA);cA.Dom.oninput=cC;return;},Password:function(cK){return h.InputField(false,"password","inputPassword",cK);},RadioButtonGroup:function(cL,cM){return h.RadioButtonGroupControl(false,cL,cM);},RadioButtonGroupControl:function(cN,cO,cP){var cQ;cQ=function(){var cS,cT,cU,cV,cW,c0,c1,c7,c8,c_,c$,di,dj,dw,dD,dQ,dR,dS,dT;cS="id"+v.round(v.random()*100000000);if(cO.$==0){cU={$:0};}else{cV=cO.$0;cW=function(cX){return $.Tupled(function(cY){var cZ;cY[0];cZ=cY[1];return[cX,cZ];});};c0=g.mapi(cW,cP);c1=$.Tupled(function(c2){var c3,c4,c5,c6;c3=c2[0];c4=c2[1];if(cO.$==0){c5={$:0};}else{c6=cO.$0;c5=c6===c3?{$:1,$0:$.New(m,{$:0,$0:c4})}:{$:0};}return c5;});cU=w.tryPick(c1,c0);}cT=cU;c7=j.New($.New(m,{$:1,$0:$.New(n,{$:0})}));c8=function(c9){return j.New(c9);};c_=x.Maybe(c7,c8,cT);c$=$.Tupled(function(da){var db,dc,dd,de,df,dg,dh;db=da[0];dc=da[1];de=f.Attr();df=f.Attr();if(cN){dh=f.Attr();dg=g.ofArray([dh.NewAttr("disabled","disabled")]);}else{dg=$.New(n,{$:0});}dd=o.add(f.Input(g.ofArray([f.Attr().Class("inputRadio"),de.NewAttr("type","radio"),df.NewAttr("name",cS)])),dg);return[dd,db,dc];});di=g.map(c$,cP);dj=function(dk,dl,dm){var dn,_do,dp,dq,dr,ds,dt,du,dv;if(cO.$==0){_do=dk["HtmlProvider@33"];dp=dk.get_Body();_do.RemoveAttribute(dp,"checked");dn=c_.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));}else{dq=cO.$0;if(dq===dm){ds=dk["HtmlProvider@33"];dt=dk.get_Body();ds.SetProperty(dt,"checked",true);dr=c_.Trigger($.New(m,{$:0,$0:dl}));}else{du=dk["HtmlProvider@33"];dv=dk.get_Body();dr=du.SetProperty(dv,"checked",false);}dn=dr;}return dn;};dw=function(){var dy;dy=function(dz){return $.Tupled(function(dA){var dB,dC;dB=dA[0];dA[1];dC=dA[2];return dj(dB,dC,dz);});};return w.iteri(dy,di);};dD=function(dE){return $.Tupled(function(dF){var dG,dH,dI,dJ,dM;dG=dF[0];dH=dF[1];dI=dF[2];dj(dG,dI,dE);dJ=function(){return function(){return!cN?c_.Trigger($.New(m,{$:0,$0:dI})):null;};};q.Events().OnClick(dJ,dG);dM={$:1,$0:function(){var dO,dP;dO=g.ofArray([f.Text(dH)]);dP=f.Tags();return dP.NewTag("label",dO);}};return $.New(c,{Element:dG,Label:dM});});};dQ=g.mapi(dD,di);dR=y.FromSequence(dQ);dS=$.New(z,{$:0,$0:dR});dT=r.RX().Return(dS);return $.New(A,{Body:dT,Dispose1:function(){},Notify:function(){return dw(null);},State:c_});};return s.New(cQ);},ReadOnlyCheckbox:function(dW){return h.CheckboxControl(true,dW);},ReadOnlyInput:function(dX){return h.InputField(true,"text",u.InputTextClass(),dX);},ReadOnlyRadioButtonGroup:function(dY,dZ){return h.RadioButtonGroupControl(true,dY,dZ);},ReadOnlySelect:function(d0,d1){return h.SelectControl(true,d0,d1);},ReadOnlyTextArea:function(d2){return h.TextAreaControl(true,d2);},Select:function(d3,d4){return h.SelectControl(false,d3,d4);},SelectControl:function(d5,d6,d7){var d8;d8=function(){var d_,ea,eb,ec,ed,el,em,en,eo,ep,eq,er,es,ex;d_=$.Tupled(function(d$){return d$[1];});ea=g.map(d_,d7);eb=B.ofSeq(ea);ec=(d6>=0?d6<d7.get_Length():false)?d6:0;ed=function(ee){return $.Tupled(function(ef){var eg,eh,ei,ej,ek;eg=ef[0];ef[1];eh=f.Tags();ej=f.Attr();ek=$$.String(ee);ei=g.ofArray([f.Text(eg),ej.NewAttr("value",ek)]);return eh.NewTag("option",ei);});};el=g.mapi(ed,d7);em=f.Select(el);if(d5){ep=f.Attr();eo=o.add(em,g.ofArray([ep.NewAttr("disabled","disabled")]));}else{eo=em;}en=eo;eq=$.New(m,{$:0,$0:C.GetArray(eb,ec)});er=j.New(eq);es=function(){var eu,ev,ew;eu=$$.String(ec);ev=en["HtmlProvider@33"];ew=en.get_Body();ev.SetProperty(ew,"value",eu);return er.Trigger(eq);};es(null);ex=function(){var ez,eA,eB,eC;if(!d5){eA=en.get_Value();eB=C.GetArray(eb,eA<<0);eC=$.New(m,{$:0,$0:eB});ez=er.Trigger(eC);}else{ez=null;}return ez;};q.Events().OnChange(ex,en);es(null);return[en,es,er];};return r.MkFormlet(d8);},TextArea:function(eD){return h.TextAreaControl(false,eD);},TextAreaControl:function(eE,eF){return h.InputControl(eF,function(eG){var eH,eI,eJ,eK,eL;if(eE){eJ=f.Attr();eI=g.ofArray([eJ.NewAttr("readonly","readonly")]);}else{eI=$.New(n,{$:0});}eH=eI;eK=f.TextArea(eH);eL=function(){return!eE?eG.Trigger($.New(m,{$:0,$0:eK.get_Value()})):null;};h.OnTextChange(eL,eK);return eK;});}},CssConstants:{InputTextClass:$.Field(function(){return"inputText";})},Data:{$:function(eN,eO){var eP,eQ;eP=r.BaseFormlet();eQ=eP.Apply(eN,eO);return r.OfIFormlet(eQ);},BaseFormlet:function(){return D.New(r.UtilsProvider());},DefaultLayout:$.Field(function(){return r.Layout().get_Vertical();}),Formlet:$.Class({Build:function(){return this.buildInternal.call(null,null);},MapResult:function(eR){var eS,eV=this;eS=E.New(function(){var eU,eW,eX,eY;eU=eV.buildInternal.call(null,null);eW=eV.utils.Reactive;eX=eU.State;eY=function(eZ){return eR(eZ);};return $.New(A,{Body:eU.Body,Dispose1:eU.Dispose1,Notify:eU.Notify,State:eW.Select(eX,eY)});},eV.layoutInternal,eV.formletBase,eV.utils);return eS;},Render:function(){return this.Run(function(){}).Render();},Run:function(e1){var e2,e3,e4,e5,e6,e9,e_,e$,fa,fb,fc,fd;e2=this.get_ElementInternal();if(e2.$==0){e4=this.formletBase.ApplyLayout(this);e5=e4.Build();e6=G.subscribeTo(e5.State,function(e7){var e8;e8=m.Map(e1,e7);return;});e9=e4.get_Layout().Apply.call(null,e5.Body);if(e9.$==0){fa=r.DefaultLayout().Apply.call(null,e5.Body).$0;fb=fa[0];e$=fb.Element;}else{fc=e9.$0[0];e$=fc.Element;}e_=e$;this.set_ElementInternal({$:1,$0:e_});e3=e_;}else{fd=e2.$0;e3=fd;}return e3;},get_Body:function(){return this.Run(function(){}).get_Body();},get_ElementInternal:function(){return this["ElementInternal@"];},get_Layout:function(){return this.layoutInternal;},set_ElementInternal:function(ff){this["ElementInternal@"]=ff;return;}},{New:function(fg,fh,fi,fj){var fk;fk=$.New(this,F.New());fk.buildInternal=fg;fk.layoutInternal=fh;fk.formletBase=fi;fk.utils=fj;fk["ElementInternal@"]={$:0};return fk;}}),Layout:$.Field(function(){return H.New(I.New({Reactive:J.Default()}));}),MkFormlet:function(fl){var fm,fn,fy;fm=r.BaseFormlet();fn=function(){var fp,fq,fr,fs,ft,fv,fw;fp=fl(null);fq=fp[2];fr=fp[1];fs=fp[0];ft=function(){return fr(null);};fv=r.NewBody(fs,{$:0});fw=y.Set(fv);return $.New(A,{Body:r.RX().Return(fw),Dispose1:function(){return null;},Notify:ft,State:fq});};fy=fm.New(fn);return r.OfIFormlet(fy);},NewBody:function(fz,fA){return c.New(fz,fA);},OfIFormlet:function(fB){var fC;fC=E.New(function(){return fB.Build();},fB.get_Layout(),r.BaseFormlet(),r.UtilsProvider());return r.PropagateRenderFrom(fB,fC);},PropagateRenderFrom:function(fE,fF){fE.hasOwnProperty("Render")?void(fF.Render=fE.Render):null;return fF;},RX:$.Field(function(){return J.Default();}),UtilsProvider:function(){return{Reactive:r.RX(),DefaultLayout:r.DefaultLayout()};},Validator:$.Field(function(){return K.New(L.New());}),ValidatorProvidor:$.Class({Matches:function(fG,fH){return fH.match(new M(fG));}},{New:function(){return $.New(this,{});}})},ElementStore:$.Class({Init:function(){this.store=O.New2();return;},RegisterElement:function(fI,fJ){var fK;fK=this.store.ContainsKey(fI);return!fK?this.store.set_Item(fI,fJ):null;},Remove:function(fL){var fM,fN;if(this.store.ContainsKey(fL)){(this.store.get_Item(fL))(null);fN=this.store.Remove(fL);fM=void fN;}else{fM=null;}return fM;}},{New:function(){return $.New(this,{});},NewElementStore:function(){var fO;fO=P.New();fO.Init();return fO;}}),Enhance:{Cancel:function(fP,fQ){return s.Replace(fP,function(fR){return fQ(fR)?s.Empty():s.Return(fR);});},CustomMany:function(fS,fT){var fU,fW,fX,fZ,f1,f2,f3,f4,f5,f6,gc,gd,ge,gf,gh,gi;fU=h.ElementButton(function(){return o.add(f.Div(g.ofArray([f.Attr().Class(fS.AddIconClass)])),g.ofArray([f.Div($.New(n,{$:0}))]));});fW=s.InitWith(1,fU);fX=function(){};fZ=h.ElementButton(function(){return o.add(f.Div(g.ofArray([f.Attr().Class(fS.RemoveIconClass)])),g.ofArray([f.Div($.New(n,{$:0}))]));});f1=s.Map(fX,fZ);f2=s.WithCancelation(fT,f1);f3=r.Layout().get_Horizontal();f4=s.WithLayout(f3,f2);f5=Q.Deletable(f4);f6=function(){var f8,f_,ga,gb;f8=function(f9){return g.ofSeq(f9);};f_=Q.Many_(fW,function(){return f5;});ga=s.Map(f8,f_);gb=s.WithLayoutOrDefault(ga);return s.ApplyLayout(gb);};gc=j.New($.New(m,{$:0,$0:null}));gd=r.BaseFormlet().FromState(gc);ge=r.OfIFormlet(gd);gf=function(){return gc.Trigger($.New(m,{$:0,$0:null}));};gh=s.Do();gi=gh.Delay(function(){return gh.Bind(ge,function(){return gh.ReturnFrom(f6(null));});});return s.WithNotification(gf,gi);},Deletable:function(gl){return Q.Replace(gl,function(gm){var gn,go;if(gm.$==1){go=gm.$0;gn=s.Return({$:1,$0:go});}else{gn=s.ReturnEmpty({$:0});}return gn;});},FormButtonConfiguration:$.Class({},{get_Default:function(){return $.New(R,{Label:{$:0},Style:{$:0},Class:{$:0}});}}),FormContainerConfiguration:$.Class({},{get_Default:function(){var gp;gp={$:0};return $.New(S,{Header:{$:0},Padding:T.get_Default(),Description:gp,BackgroundColor:{$:0},BorderColor:{$:0},CssClass:{$:0},Style:{$:0}});}}),InputButton:function(gq,gr){var gs;gs=function(){var gu,gv,gw,gy,gz,gA,gB,gE,gF,gG,gH,gI,gJ,gK,gL,gM,gN,gO,gP,gQ,gR,gS,gT;gu=j.New($.New(m,{$:1,$0:$.New(n,{$:0})}));gv={contents:0};gw=x.Maybe("Submit",function(gx){return gx;},gq.Label);gz=f.Attr();gA=f.Attr();gy=o.add(f.Input(g.ofArray([gz.NewAttr("type","button")])),g.ofArray([f.Attr().Class("submitButton"),gA.NewAttr("value",gw)]));gB=function(){return function(){t.Increment(gv);return gu.Trigger($.New(m,{$:0,$0:gv.contents}));};};q.Events().OnClick(gB,gy);gE=gy;if(!gr){gH=gE["HtmlProvider@33"];gI=gE.get_Body();gG=gH.AddClass(gI,"disabledButton");}else{gG=null;}gJ=gq.Style;if(gJ.$==1){gL=gJ.$0;gM=gE["HtmlProvider@33"];gN=gE.get_Body();gK=gM.SetStyle(gN,gL);}else{gK=null;}gO=gq.Class;if(gO.$==1){gQ=gO.$0;gR=gE["HtmlProvider@33"];gS=gE.get_Body();gP=gR.AddClass(gS,gQ);}else{gP=null;}gF=gE;gT=function(){gv.contents=0;return gu.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));};gu.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));return[gF,gT,gu];};return r.MkFormlet(gs);},Many:function(gV){return Q.CustomMany(U.get_Default(),gV);},ManyConfiguration:$.Class({},{get_Default:function(){return $.New(U,{AddIconClass:"addIcon",RemoveIconClass:"removeIcon"});}}),Many_:function(gW,gX){var gY,g0,g2,g4,g5,g6;gY=function(gZ){return gX(gZ);};g0=function(g1){return g1;};g2=function(g3){return w.choose(g0,g3);};g4=s.Map(gY,gW);g5=s.SelectMany(g4);g6=s.FlipBody(g5);return s.Map(g2,g6);},Padding:$.Class({},{get_Default:function(){return $.New(T,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}}),Replace:function(g7,g8){var g9,hd;g9=function(g_){var g$,ha,hb,hc;if(g_.$==1){ha=g_.$0;hb=s.FailWith(ha);g$=$.New(m,{$:0,$0:hb});}else{hc=g_.$0;g$=$.New(m,{$:0,$0:g8(hc)});}return g$;};hd=s.MapResult(g9,g7);return s.Switch(hd);},ValidationFrameConfiguration:$.Class({},{get_Default:function(){return $.New(V,{ValidClass:{$:1,$0:"successFormlet"},ValidStyle:{$:0},ErrorClass:{$:1,$0:"errorFormlet"},ErrorStyle:{$:0}});}}),ValidationIconConfiguration:$.Class({},{get_Default:function(){return $.New(W,{ValidIconClass:"validIcon",ErrorIconClass:"errorIcon"});}}),WithCssClass:function(he,hf){var hg;hg=function(hh){var hi,hj;hi=hh["HtmlProvider@33"];hj=hh.get_Body();hi.AddClass(hj,he);return hh;};return s.MapElement(hg,hf);},WithCustomFormContainer:function(hk,hl){var hm,hn;hm=s.ApplyLayout(hl);hn=function(ho){var hp,hq,hr,hw,hx,hy,hz,hG,hH,hI,hN,hO,hP,hR,hS,hU,hV,hX,hY,h0,h1,h3,h4,ia,ib,ic,id,ie,_if,ig,ih,ii,ij;hp=hk.Description;hq=$.New(n,{$:0});hr=function(hs){var ht,hu,hv;if(hs.$==1){hu=hs.$0;ht=g.ofArray([hu(null)]);}else{hv=hs.$0;ht=g.ofArray([f.P(g.ofArray([f.Tags().text(hv)]))]);}return ht;};hw=x.Maybe(hq,hr,hp);hx=hk.Header;hy=x.InTable(g.ofArray([g.ofArray([o.add(f.Div(g.ofArray([f.Attr().Class("headerPanel")])),hw)]),g.ofArray([ho])]));hz=function(hA){var hB,hC,hD,hE,hF;if(hA.$==1){hD=hA.$0;hC=hD(null);}else{hE=hA.$0;hC=f.H1(g.ofArray([f.Tags().text(hE)]));}hB=hC;hF=o.add(f.Div(g.ofArray([f.Attr().Class("headerPanel")])),$.New(n,{$:1,$0:hB,$1:hw}));return x.InTable(g.ofArray([g.ofArray([hF]),g.ofArray([ho])]));};hG=x.Maybe(hy,hz,hx);hH=o.add(f.TD(g.ofArray([f.Attr().Class("formlet")])),g.ofArray([hG]));hI=function(hJ){var hK,hL,hM;hK="border-color: "+hJ;hL=hH["HtmlProvider@33"];hM=hH.get_Body();return hL.SetStyle(hM,hK);};hN=hk.BorderColor;x.Maybe(null,hI,hN);hP=function(hQ){return hQ;};hR=hk.BackgroundColor;hS=function(hT){return $$.String(hT)+"px";};hU=hk.Padding.Left;hV=function(hW){return $$.String(hW)+"px";};hX=hk.Padding.Right;hY=function(hZ){return $$.String(hZ)+"px";};h0=hk.Padding.Top;h1=function(h2){return $$.String(h2)+"px";};h3=hk.Padding.Bottom;hO=g.ofArray([["background-color",x.MapOption(hP,hR)],["padding-left",x.MapOption(hS,hU)],["padding-right",x.MapOption(hV,hX)],["padding-top",x.MapOption(hY,h0)],["padding-bottom",x.MapOption(h1,h3)]]);h4=$.Tupled(function(h5){var h6,h7,h8,h9,h_,h$;h6=h5[0];h7=h5[1];if(h7.$==0){h8=null;}else{h9=h7.$0;h_=hH["HtmlProvider@33"];h$=hH.get_Body();h8=h_.SetCss(h$,h6,h9);}return h8;});w.iter(h4,hO);ia=hk.Style;if(ia.$==0){ib=null;}else{ic=ia.$0;id=hH["HtmlProvider@33"];ie=hH.get_Body();ib=id.SetStyle(ie,ic);}_if=hk.CssClass;if(_if.$==0){ig=null;}else{ih=_if.$0;ii=hH["HtmlProvider@33"];ij=hH.get_Body();ig=ii.AddClass(ij,ih);}return f.Table(g.ofArray([f.TBody(g.ofArray([f.TR(g.ofArray([hH]))]))]));};return s.MapElement(hn,hm);},WithCustomResetButton:function(ik,il){var im,_in,io,ip;im=ik.Label;if(im.$==0){io=$.New(R,{Label:{$:1,$0:"Reset"},Style:ik.Style,Class:ik.Class});}else{im.$0;io=ik;}_in=io;ip=Q.InputButton(_in,true);return Q.WithResetFormlet(il,ip);},WithCustomSubmitAndResetButtons:function(iq,ir,is){var it;it=function(iu){return function(iv){var iw,ix,iy,iz,iB,iC,iD,iF,iG,iH,iK,iN;if(iv.$==1){iy=iv.$0;iz=function(){return $.New(m,{$:1,$0:iy});};iB=Q.InputButton(iq,false);ix=s.MapResult(iz,iB);}else{iC=iv.$0;iD=function(){return iC;};iF=Q.InputButton(iq,true);ix=s.Map(iD,iF);}iw=ix;iG=s.Do();iH=iG.Delay(function(){return iG.Bind(s.LiftResult(Q.InputButton(ir,true)),function(iJ){iJ.$==0?iu(null):null;return iG.Return(null);});});iK=r.$(r.$(s.Return(function(iL){return function(){return iL;};}),iw),iH);iN=r.Layout().get_Horizontal();return s.WithLayout(iN,iK);};};return Q.WithSubmitAndReset(is,it);},WithCustomSubmitButton:function(iO,iP){var iQ,iR,iS;iQ=iO.Label;if(iQ.$==0){iS=$.New(R,{Label:{$:1,$0:"Submit"},Style:iO.Style,Class:iO.Class});}else{iQ.$0;iS=iO;}iR=iS;return Q.WithSubmitFormlet(iP,function(iT){var iU,iW,iX;iU=function(){};iW=iT.$==0?true:false;iX=Q.InputButton(iR,iW);return s.Map(iU,iX);});},WithCustomValidationFrame:function(iY,iZ){var i0;i0=function(i1){return function(i2){var i3,i4;i3=f.Div(g.ofArray([i2.Element]));i4=function(i5){var i6;i6=G.subscribeTo(i1,function(i7){var i8,i9,i_,i$,ja,jb,jc,jd,je,jf,jg,jh,ji,jj,jk,jl,jm,jn,jo,jp,jq,jr,js,jt,ju,jv,jw,jx,jy,jz,jA,jB,jC,jD,jE,jF;if(i7.$==1){i9=i7.$0;i_=iY.ValidClass;if(i_.$==1){ja=i_.$0;jb=i5["HtmlProvider@33"];jc=i5.get_Body();i$=jb.RemoveClass(jc,ja);}else{i$=null;}jd=iY.ErrorClass;if(jd.$==1){jf=jd.$0;jg=i5["HtmlProvider@33"];jh=i5.get_Body();je=jg.AddClass(jh,jf);}else{je=null;}ji=iY.ErrorStyle;if(ji.$==1){jk=ji.$0;jl=i5["HtmlProvider@33"];jm=i5.get_Body();jj=jl.SetStyle(jm,jk);}else{jn=i5["HtmlProvider@33"];jo=i5.get_Body();jj=jn.SetStyle(jo,"");}i8=jj;}else{jp=iY.ErrorClass;if(jp.$==1){jr=jp.$0;js=i5["HtmlProvider@33"];jt=i5.get_Body();jq=js.RemoveClass(jt,jr);}else{jq=null;}ju=iY.ValidClass;if(ju.$==1){jw=ju.$0;jx=i5["HtmlProvider@33"];jy=i5.get_Body();jv=jx.AddClass(jy,jw);}else{jv=null;}jz=iY.ValidStyle;if(jz.$==1){jB=jz.$0;jC=i5["HtmlProvider@33"];jD=i5.get_Body();jA=jC.SetStyle(jD,jB);}else{jE=i5["HtmlProvider@33"];jF=i5.get_Body();jA=jE.SetStyle(jF,"");}i8=jA;}return i8;});return;};o.OnAfterRender(i4,i3);return i3;};};return Q.WrapFormlet(i0,iZ);},WithCustomValidationIcon:function(jG,jH){var jI,jJ,jV,jW,jY,j2,j3;jI=s.WithLayoutOrDefault(jH);jJ=function(jK){var jL;jL=function(){var jN,jO,jP,jS,jT,jU;if(jK.$==1){jO=jK.$0;jP=function(jQ){return function(jR){return jQ+" "+jR;};};jS=w.fold(jP,"",jO);jT=f.Attr();jN=o.add(f.Div(g.ofArray([f.Attr().Class(jG.ErrorIconClass),jT.NewAttr("title",jS)])),g.ofArray([f.Div($.New(n,{$:0}))]));}else{jU=f.Attr();jN=o.add(f.Div(g.ofArray([f.Attr().Class(jG.ValidIconClass),jU.NewAttr("title","")])),g.ofArray([f.Div($.New(n,{$:0}))]));}return jN;};return s.OfElement(jL);};jV=s.Do();jW=function(jX){return m.Join(jX);};jY=jV.Delay(function(){return jV.Bind(s.LiftResult(jI),function(j0){return jV.Bind(jJ(j0),function(){return jV.Return(j0);});});});j2=s.MapResult(jW,jY);j3=r.Layout().get_Horizontal();return s.WithLayout(j3,j2);},WithErrorFormlet:function(j4,j5){var j6,j7,j9;j6=s.Do();j7=function(j8){return m.Join(j8);};j9=j6.Delay(function(){return j6.Bind(s.LiftResult(j5),function(j$){var ka,kb,kc;if(j$.$==1){kb=j$.$0;kc=s.Do();ka=kc.Delay(function(){return kc.Bind(j4(kb),function(){return kc.Return(j$);});});}else{j$.$0;ka=s.Return(j$);}return j6.ReturnFrom(ka);});});return s.MapResult(j7,j9);},WithErrorSummary:function(kf,kg){var kh,kr,ks,ku;kh=function(ki){return s.OfElement(function(){var kk,kl,km,kn,kp,kq;kl=g.ofArray([f.Text(kf)]);km=f.Tags();kn=function(ko){return f.LI(g.ofArray([f.Text(ko)]));};kp=g.map(kn,ki);kk=g.ofArray([km.NewTag("legend",kl),f.UL(kp)]);kq=f.Tags();return kq.NewTag("fieldset",kk);});};kr=s.Do();ks=function(kt){return m.Join(kt);};ku=kr.Delay(function(){return kr.Bind(s.LiftResult(kg),function(kw){var kx,ky,kz,kB;if(kw.$==1){ky=kw.$0;kz=function(){return kw;};kB=kh(ky);kx=s.Map(kz,kB);}else{kw.$0;kx=s.Return(kw);}return kr.ReturnFrom(kx);});});return s.MapResult(ks,ku);},WithFormContainer:function(kC){return Q.WithCustomFormContainer(S.get_Default(),kC);},WithJsonPost:function(kD,kE){var kF,kG,kH,kI,kJ,kK,kL,kM,kN,kO,kP,kQ,kR,kS,kT,kU,kV,kW,kX,kY,kZ,k0,k1,k2,k3,k4,k5,la,lb,le;kF=kD.PostUrl;if(kF.$==0){kH=$.New(n,{$:0});}else{kI=kF.$0;kJ=f.Attr();kH=g.ofArray([kJ.NewAttr("action",kI)]);}kG=kH;kK=kD.EncodingType;if(kK.$==0){kM=$.New(n,{$:0});}else{kN=kK.$0;kO=f.Attr();kM=g.ofArray([kO.NewAttr("enctype",kN)]);}kL=kM;kP=f.Tags();kR=f.Attr();kS=f.Attr();kT=kD.ParameterName;kQ=g.ofArray([kR.NewAttr("type","hidden"),kS.NewAttr("name",kT)]);kU=kP.NewTag("input",kQ);kV=f.Tags();kX=f.Attr();kY=f.Attr();kW=g.ofArray([kX.NewAttr("type","submit"),kY.NewAttr("value","Submit")]);kZ=kV.NewTag("input",kW);k1=f.Attr();k2=f.Attr();k0=$.New(n,{$:1,$0:k1.NewAttr("method","POST"),$1:$.New(n,{$:1,$0:k2.NewAttr("style","display:none"),$1:kG})});k3=g.append(k0,kL);k4=o.add(f.Form(k3),g.ofArray([kU,kZ]));k5=function(k6){var k7,k8,k9,k_,k$;k7=kD.EncodingType;if(k7.$==0){k8=null;}else{k9=k7.$0;if(k9==="multipart/form-data"){k$=p(k6.get_Body()).attr("encoding","multipart/form-data");k_=void k$;}else{k_=null;}k8=k_;}return k8;};o.OnAfterRender(k5,k4);la=k4;lb=function(lc){var ld;ld=X.stringify(lc);p(kU.get_Body()).val(ld);return p(kZ.get_Body()).click();};le=s.Map(lb,kE);return f.Div(g.ofArray([la,le]));},WithLabel:function(lf,lg){return s.WithLabel({$:1,$0:lf},lg);},WithLabelAbove:function(lh){var li;li=function(lj){var lk,ll,lm,ln,lo,lp;lk=lj.Label;if(lk.$==0){lm=f.Span($.New(n,{$:0}));}else{ln=lk.$0;lm=ln(null);}ll=lm;lo=f.Table(g.ofArray([f.TBody(g.ofArray([f.TR(g.ofArray([f.TD(g.ofArray([ll]))])),f.TR(g.ofArray([f.TD(g.ofArray([lj.Element]))]))]))]));lp={$:0};return $.New(c,{Element:lo,Label:lp});};return s.MapBody(li,lh);},WithLabelAndInfo:function(lq,lr,ls){var lt;lt=function(){var lv,lw,lx;lv=g.ofArray([f.Text(lq)]);lw=f.Tags();lx=f.Attr();return x.InTable(g.ofArray([g.ofArray([lw.NewTag("label",lv),f.Span(g.ofArray([lx.NewAttr("title",lr),f.Attr().Class("infoIcon")]))])]));};return Q.WithLabel(lt,ls);},WithLabelConfiguration:function(ly,lz){var lA,lB;lA=s.ApplyLayout(lz);lB=r.Layout().LabelLayout(ly);return s.WithLayout(lB,lA);},WithLabelLeft:function(lC){var lD;lD=function(lE){var lF,lG,lH,lI,lJ,lK;lF=lE.Label;if(lF.$==0){lH=f.Span($.New(n,{$:0}));}else{lI=lF.$0;lH=lI(null);}lG=lH;lJ=f.Table(g.ofArray([f.TBody(g.ofArray([f.TR(g.ofArray([f.TD(g.ofArray([lE.Element])),f.TD(g.ofArray([lG]))]))]))]));lK={$:0};return $.New(c,{Element:lJ,Label:lK});};return s.MapBody(lD,lC);},WithLegend:function(lL,lM){var lN;lN=function(lO){var lP,lQ,lR,lS,lT,lU,lV,lW;lQ=g.ofArray([f.Tags().text(lL)]);lR=f.Tags();lS=lO.Label;if(lS.$==0){lT=lO.Element;}else{lU=lS.$0;lT=x.InTable(g.ofArray([g.ofArray([lU(null),lO.Element])]));}lP=g.ofArray([lR.NewTag("legend",lQ),lT]);lV=f.Tags();lW=lV.NewTag("fieldset",lP);return $.New(c,{Element:lW,Label:{$:0}});};return s.MapBody(lN,lM);},WithResetAction:function(lX,lY){var lZ,l4,l5,l6,l7;lZ=function(){var l1,l2;l1=lY.Build();l2=function(l3){return lX(null)?l1.Notify.call(null,l3):null;};return $.New(A,{Body:l1.Body,Dispose1:l1.Dispose1,Notify:l2,State:l1.State});};l4=s.New(lZ);l5=lY.get_Layout();l6=s.WithLayout(l5,l4);l7=r.PropagateRenderFrom(lY,l6);return r.OfIFormlet(l7);},WithResetButton:function(l8){return Q.WithCustomResetButton(R.get_Default(),l8);},WithResetFormlet:function(l9,l_){var l$,ma,mb,mc,md,me,mf,mg,mi,mo,mp;l$=s.WithLayoutOrDefault(l9);ma=s.ApplyLayout(l$);mb=s.InitWithFailure(ma);mc=s.LiftResult(mb);md=s.WithNotificationChannel(mc);me=s.LiftResult(l_);mf=s.Do();mg=function(mh){return m.Join(mh);};mi=mf.Delay(function(){return mf.Bind(md,$.Tupled(function(mk){var ml,mm;ml=mk[0];mm=mk[1];return mf.Bind(me,function(mn){mn.$==0?mm(null):null;return mf.Return(ml);});}));});mo=s.MapResult(mg,mi);mp=r.PropagateRenderFrom(md,mo);return r.OfIFormlet(mp);},WithRowConfiguration:function(mq,mr){var ms,mt;ms=s.ApplyLayout(mr);mt=r.Layout().RowLayout(mq);return s.WithLayout(mt,ms);},WithSubmitAndReset:function(mu,mv){var mw,mx,mF;mw=s.Do();mx=mw.Delay(function(){var mz,mA;mz=s.InitWithFailure(mu);mA=s.LiftResult(mz);return mw.Bind(s.WithNotificationChannel(mA),$.Tupled(function(mB){var mC,mD;mC=mB[0];mD=mB[1];return mw.ReturnFrom((mv(function(mE){return mD(mE);}))(mC));}));});mF=r.PropagateRenderFrom(mu,mx);return r.OfIFormlet(mF);},WithSubmitAndResetButtons:function(mG){var mH,mI,mJ,mK;mH=R.get_Default();mI=$.New(R,{Label:{$:1,$0:"Submit"},Style:mH.Style,Class:mH.Class});mJ=R.get_Default();mK=$.New(R,{Label:{$:1,$0:"Reset"},Style:mJ.Style,Class:mJ.Class});return Q.WithCustomSubmitAndResetButtons(mI,mK,mG);},WithSubmitButton:function(mL){return Q.WithCustomSubmitButton(R.get_Default(),mL);},WithSubmitFormlet:function(mM,mN){var mO,mP,mR,mW,mX;mO=s.Do();mP=function(mQ){return m.Join(mQ);};mR=mO.Delay(function(){var mT;mT=s.InitWithFailure(mM);return mO.Bind(s.LiftResult(mT),function(mU){return mO.Bind(mN(mU),function(){return mO.Return(mU);});});});mW=s.MapResult(mP,mR);mX=r.PropagateRenderFrom(mM,mW);return r.OfIFormlet(mX);},WithTextLabel:function(mY,mZ){return Q.WithLabel(function(){var m1,m2;m1=g.ofArray([f.Text(mY)]);m2=f.Tags();return m2.NewTag("label",m1);},mZ);},WithValidationFrame:function(m3){return Q.WithCustomValidationFrame(V.get_Default(),m3);},WithValidationIcon:function(m4){return Q.WithCustomValidationIcon(W.get_Default(),m4);},WrapFormlet:function(m5,m6){var m7;m7=function(){var m9,m_,m$,na,nb;m9=s.WithLayoutOrDefault(m6);m_=s.BuildForm(m9);m$=m9.get_Layout().Apply.call(null,m_.Body).$0;m$[1];na=m$[0];nb=(m5(m_.State))(na);return[nb,function(){return m_.Notify.call(null,null);},m_.State];};return r.MkFormlet(m7);}},Formlet:{ApplyLayout:function(nd){var ne,nf;ne=r.BaseFormlet().ApplyLayout(nd);nf=r.PropagateRenderFrom(nd,ne);return r.OfIFormlet(nf);},Bind:function(ng,nh){var ni,nj,nm,nn;ni=r.BaseFormlet();nj=function(nk){var nl;nl=nh(nk);return nl;};nm=ni.Bind(ng,nj);nn=r.PropagateRenderFrom(ng,nm);return r.OfIFormlet(nn);},BindWith:function(no,np,nq){var nr,ns,nu,nv;nr=r.BaseFormlet();ns=function(nt){return nq(nt);};nu=nr.BindWith(no,np,ns);nv=r.PropagateRenderFrom(np,nu);return r.OfIFormlet(nv);},BuildForm:function(nw){return r.BaseFormlet().BuildForm(nw);},BuildFormlet:function(nx){return r.MkFormlet(nx);},Choose:function(ny){var nz,nA,nG,nH,nI,nX,nY,n0,n1;nz={contents:0};nA=function(nB){var nC,nE,nF;nC=function(nD){t.Increment(nz);return[nD,nz.contents];};nE=s.Map(nC,nB);nF=s.InitWithFailure(nE);return s.LiftResult(nF);};nG=w.map(nA,ny);nH=s.Sequence(nG);nI=function(nJ){var nK,nO,nP,nS,nT,nU;nK=function(nL){var nM,nN;if(nL.$==0){nN=nL.$0;nM={$:1,$0:nN};}else{nM={$:0};}return nM;};nO=g.choose(nK,nJ);nP=$.Tupled(function(nQ){var nR;nQ[0];nR=nQ[1];return nR;});nS=g.sortBy(nP,nO);nT=g.rev(nS);nU=$.Tupled(function(nV){var nW;nW=nV[0];nV[1];return{$:1,$0:nW};});return w.tryPick(nU,nT);};nX=s.Map(nI,nH);nY=function(nZ){return nZ.$==1;};n0=r.Validator().Is(nY,"",nX);n1=function(n2){return n2.$0;};return s.Map(n1,n0);},Delay:function(n3){var n4;n4=r.BaseFormlet().Delay(function(){return n3(null);});return r.OfIFormlet(n4);},Deletable:function(n6){var n7,n8;n7=r.BaseFormlet().Deletable(n6);n8=r.PropagateRenderFrom(n6,n7);return r.OfIFormlet(n8);},Do:$.Field(function(){return Y.New();}),Empty:function(){var n9;n9=r.BaseFormlet().Empty();return r.OfIFormlet(n9);},FailWith:function(n_){var n$;n$=r.BaseFormlet().FailWith(n_);return r.OfIFormlet(n$);},FlipBody:function(oa){var ob,oc;ob=r.BaseFormlet().FlipBody(oa);oc=r.PropagateRenderFrom(oa,ob);return r.OfIFormlet(oc);},Flowlet:function(od){var oe,of,og,oh;oe=r.BaseFormlet();of=r.Layout().get_Flowlet();og=oe.WithLayout(of,od);oh=r.PropagateRenderFrom(od,og);return r.OfIFormlet(oh);},Horizontal:function(oi){var oj,ok,ol,om;oj=r.BaseFormlet();ok=r.Layout().get_Horizontal();ol=oj.WithLayout(ok,oi);om=r.PropagateRenderFrom(oi,ol);return r.OfIFormlet(om);},InitWith:function(on,oo){var op,oq,or;op=r.BaseFormlet();oq=op.InitWith(on,oo);or=r.PropagateRenderFrom(oo,oq);return r.OfIFormlet(or);},InitWithFailure:function(os){var ot,ou;ot=r.BaseFormlet().InitWithFailure(os);ou=r.PropagateRenderFrom(os,ot);return r.OfIFormlet(ou);},Join:function(ov){var ow,oy,oz,oA,oB;ow=function(ox){return ox;};oy=s.Map(ow,ov);oz=r.BaseFormlet();oA=oz.Join(oy);oB=r.PropagateRenderFrom(ov,oA);return r.OfIFormlet(oB);},LiftResult:function(oC){var oD,oE;oD=r.BaseFormlet().LiftResult(oC);oE=r.PropagateRenderFrom(oC,oD);return r.OfIFormlet(oE);},Map:function(oF,oG){var oH,oI,oJ;oH=r.BaseFormlet();oI=oH.Map(oF,oG);oJ=r.PropagateRenderFrom(oG,oI);return r.OfIFormlet(oJ);},MapBody:function(oK,oL){var oM,oN,oO;oM=r.BaseFormlet();oN=oM.MapBody(oK,oL);oO=r.PropagateRenderFrom(oL,oN);return r.OfIFormlet(oO);},MapElement:function(oP,oQ){var oR,oS,oU,oV;oR=r.BaseFormlet();oS=function(oT){return $.New(c,{Element:oP(oT.Element),Label:oT.Label});};oU=oR.MapBody(oS,oQ);oV=r.PropagateRenderFrom(oQ,oU);return r.OfIFormlet(oV);},MapResult:function(oW,oX){var oY,oZ,o0;oY=r.BaseFormlet();oZ=oY.MapResult(oW,oX);o0=r.PropagateRenderFrom(oX,oZ);return r.OfIFormlet(o0);},Never:function(){var o1;o1=r.BaseFormlet().Never();return r.OfIFormlet(o1);},New:function(o2){var o3;o3=r.BaseFormlet().New(o2);return r.OfIFormlet(o3);},OfElement:function(o4){var o5;o5=function(){var o7;o7=o4(null);return[o7,function(){},r.RX().Return($.New(m,{$:0,$0:null}))];};return r.MkFormlet(o5);},Render:function(o9){var o_;o_=o9.Run(function(){});return r.PropagateRenderFrom(o9,o_);},Replace:function(pa,pb){var pc,pd,pf,pg;pc=r.BaseFormlet();pd=function(pe){return pb(pe);};pf=pc.Replace(pa,pd);pg=r.PropagateRenderFrom(pa,pf);return r.OfIFormlet(pg);},ReplaceFirstWithFailure:function(ph){var pi,pj;pi=r.BaseFormlet().ReplaceFirstWithFailure(ph);pj=r.PropagateRenderFrom(ph,pi);return r.OfIFormlet(pj);},Return:function(pk){var pl;pl=r.BaseFormlet().Return(pk);return r.OfIFormlet(pl);},ReturnEmpty:function(pm){var pn;pn=r.BaseFormlet().ReturnEmpty(pm);return r.OfIFormlet(pn);},Run:function(po,pp){return pp.Run(po);},SelectMany:function(pq){var pr,pt,pu,pv,pw;pr=function(ps){return ps;};pt=s.Map(pr,pq);pu=r.BaseFormlet();pv=pu.SelectMany(pt);pw=r.PropagateRenderFrom(pq,pv);return r.OfIFormlet(pw);},Sequence:function(px){var py,pA,pB,pC;py=function(pz){return pz;};pA=w.map(py,px);pB=r.BaseFormlet();pC=pB.Sequence(pA);return r.OfIFormlet(pC);},Switch:function(pD){var pE,pG,pH,pI,pJ;pE=function(pF){return pF;};pG=s.Map(pE,pD);pH=r.BaseFormlet();pI=pH.Switch(pG);pJ=r.PropagateRenderFrom(pD,pI);return r.OfIFormlet(pJ);},Vertical:function(pK){var pL,pM,pN,pO;pL=r.BaseFormlet();pM=r.Layout().get_Vertical();pN=pL.WithLayout(pM,pK);pO=r.PropagateRenderFrom(pK,pN);return r.OfIFormlet(pO);},WithCancelation:function(pP,pQ){var pR,pS,pT;pR=r.BaseFormlet();pS=pR.WithCancelation(pP,pQ);pT=r.PropagateRenderFrom(pP,pS);return r.OfIFormlet(pT);},WithLabel:function(pU,pV){var pW,pX,pZ,p0;pW=r.BaseFormlet();pX=function(pY){return $.New(c,{Element:pY.Element,Label:pU});};pZ=pW.MapBody(pX,pV);p0=r.PropagateRenderFrom(pV,pZ);return r.OfIFormlet(p0);},WithLayout:function(p1,p2){var p3,p4,p5;p3=r.BaseFormlet();p4=p3.WithLayout(p1,p2);p5=r.PropagateRenderFrom(p2,p4);return r.OfIFormlet(p5);},WithLayoutOrDefault:function(p6){var p7,p8;p7=r.BaseFormlet().WithLayoutOrDefault(p6);p8=r.PropagateRenderFrom(p6,p7);return r.OfIFormlet(p8);},WithNotification:function(p9,p_){var p$,qa,qb;p$=r.BaseFormlet();qa=p$.WithNotification(p9,p_);qb=r.PropagateRenderFrom(p_,qa);return r.OfIFormlet(qb);},WithNotificationChannel:function(qc){var qd,qe;qd=r.BaseFormlet().WithNotificationChannel(qc);qe=r.PropagateRenderFrom(qc,qd);return r.OfIFormlet(qe);}},FormletBuilder:$.Class({Bind:function(qf,qg){var qh,qi,ql,qm;qh=r.BaseFormlet();qi=function(qj){var qk;qk=qg(qj);return qk;};ql=qh.Bind(qf,qi);qm=r.PropagateRenderFrom(qf,ql);return r.OfIFormlet(qm);},Delay:function(qn){var qo;qo=r.BaseFormlet().Delay(function(qp){return qn(qp);});return r.OfIFormlet(qo);},Return:function(qq){var qr;qr=r.BaseFormlet().Return(qq);return r.OfIFormlet(qr);},ReturnFrom:function(qs){return r.OfIFormlet(qs);}},{New:function(){return $.New(this,{});}}),Layout:{FormRowConfiguration:$.Class({},{get_Default:function(){return $.New(_0,{Padding:{$:0},Color:{$:0},Class:{$:0},Style:{$:0},LabelConfiguration:{$:0}});}}),LabelConfiguration:$.Class({},{get_Default:function(){return $.New(_1,{Align:{$:0},VerticalAlign:{$:1},Placement:{$:0}});}}),Padding:$.Class({},{get_Default:function(){return $.New(_2,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}})},LayoutProvider:$.Class({ColumnLayout:function(qt){var qu,qv,qF=this;qu=this.LayoutUtils;qv=function(){var qx,qy,qz,qA,qM;qx=f.TR($.New(n,{$:0}));qy=f.Table(g.ofArray([f.TBody(g.ofArray([qx]))]));qz=P.NewElementStore();qA=function(qB){return function(qC){var qD,qE,qG,qH,qI;qD=qC.Element.get_Id();qE=f.TD(g.ofArray([f.Table(g.ofArray([f.TBody(g.ofArray([qF.MakeRow(qt,qB,qC)]))]))]));qG=p(qx.get_Body());qH={contents:0};qI={contents:false};qG.children().each(function(){var qJ,qK;qJ=p(this);if(qB===qH.contents){p(qE.get_Body()).insertBefore(qJ);qE.Render();qK=void(qI.contents=true);}else{qK=null;}return t.Increment(qH);});!qI.contents?qx.AppendI(qE):null;return qz.RegisterElement(qD,function(){return qE["HtmlProvider@33"].Remove(qE.get_Body());});};};qM=function(qN){var qO,qP;qO=_3.Get(qN);while(qO.MoveNext()){qP=qO.get_Current();qz.Remove(qP.Element.get_Id());}return;};return{Body:$.New(c,{Element:qy,Label:{$:0}}),SyncRoot:null,Insert:qA,Remove:qM};};return qu.New(qv);},HorizontalAlignElem:function(qQ,qR){var qS,qT,qU;qS=qQ.$==0?"left":"right";qT=f.Attr();qU="float:"+qS+";";return o.add(f.Div(g.ofArray([qT.NewAttr("style",qU)])),g.ofArray([qR]));},LabelLayout:function(qV){var qW,qX;qW=_0.get_Default();qX={$:1,$0:qV};return this.RowLayout($.New(_0,{Padding:qW.Padding,Color:qW.Color,Class:qW.Class,Style:qW.Style,LabelConfiguration:qX}));},MakeLayout:function(qY){var qZ,q0;qZ=this.LayoutUtils;q0=function(){var q2,q3,q4,ra;q2=qY(null);q3=P.NewElementStore();q4=function(q5){return function(q6){var q7,q8;q7=q6.Element.get_Id();q8=(q2.Insert.call(null,q5))(q6);return q3.RegisterElement(q7,function(){var q_,q$;q_=_3.Get(q8);while(q_.MoveNext()){q$=q_.get_Current();q$["HtmlProvider@33"].Remove(q$.get_Body());}return;});};};ra=function(rb){var rc,rd;rc=_3.Get(rb);while(rc.MoveNext()){rd=rc.get_Current();q3.Remove(rd.Element.get_Id());}return;};return{Body:$.New(c,{Element:q2.Panel,Label:{$:0}}),SyncRoot:null,Insert:q4,Remove:ra};};return qZ.New(q0);},MakeRow:function(re,rf,rg){var rh,ri,rj,rl,rm,ro,rp,rq,rs,rt,ru,rw,rx,ry,rA,rB,rC,r7,r8,r9,r_,r$,sa,sb,sc,se,sf,sg,sh,si,sj,sk,sl,sm,sn,so,sr,ss,st,su,sx,sy,sz,sA,sC,sD,sE,sF,sG,sJ,sK,sL,sM;rh=re.Padding;ri=_2.get_Default();rj=function(rk){return rk;};rl=x.Maybe(ri,rj,rh);rm=function(rn){return rn;};ro=rl.Left;rp=x.Maybe(0,rm,ro);rq=function(rr){return rr;};rs=rl.Top;rt=x.Maybe(0,rq,rs);ru=function(rv){return rv;};rw=rl.Right;rx=x.Maybe(0,ru,rw);ry=function(rz){return rz;};rA=rl.Bottom;rB=x.Maybe(0,ry,rA);rC=function(rD){return function(rE){return function(rF){return function(rG){return function(rH){return function(rI){return function(rJ){var rK,rL,rP,rS,rT,rU,rX,rY,rZ,r0,r1,r2,r3,r4,r5,r6;rK=g.ofArray([["padding-left: ",rD],["padding-top: ",rE],["padding-right: ",rF],["padding-bottom: ",rG]]);rL=$.Tupled(function(rM){var rN,rO;rN=rM[0];rO=rM[1];return rN+$$.String(rO)+"px;";});rP=function(rQ){return function(rR){return rQ+rR;};};rS=g.map(rL,rK);rT=w.reduce(rP,rS);rU=function(rV){var rW;rW=rV.$==1?"middle":rV.$==2?"bottom":"top";return"vertical-align: "+rW+";";};rX=x.Maybe("",rU,rI);rY=f.Attr();rZ=rT+";"+rX;r0=rY.NewAttr("style",rZ);if(rH){r3=f.Attr();r2=g.ofArray([r3.NewAttr("colspan","2")]);}else{r2=$.New(n,{$:0});}r1=r2;r4=$.New(n,{$:1,$0:r0,$1:r1});r5=g.ofArray([rJ]);r6=g.append(r4,r5);return f.TD(r6);};};};};};};};r7=rg.Element;r8=rg.Label;if(r8.$==1){r$=r8.$0;sa=re.LabelConfiguration;sb=_1.get_Default();sc=function(sd){return sd;};se=x.Maybe(sb,sc,sa);sf=se.Align;sg=r$(null);sh=this.HorizontalAlignElem(sf,sg);si=se.Placement;if(si.$==3){sk=x.InTable(g.ofArray([g.ofArray([r7]),g.ofArray([sh])]));sj=g.ofArray([((((((rC(rp))(rt))(rx))(rB))(true))({$:0}))(sk)]);}else{if(si.$==0){sj=g.ofArray([((((((rC(rp))(rt))(0))(rB))(false))({$:1,$0:se.VerticalAlign}))(sh),((((((rC(0))(rt))(rx))(rB))(false))({$:0}))(r7)]);}else{if(si.$==1){sj=g.ofArray([((((((rC(rp))(rt))(0))(rB))(false))({$:1,$0:se.VerticalAlign}))(r7),((((((rC(0))(rt))(rx))(rB))(false))({$:0}))(sh)]);}else{sl=x.InTable(g.ofArray([g.ofArray([sh]),g.ofArray([r7])]));sj=g.ofArray([((((((rC(rp))(rt))(rx))(rB))(true))({$:0}))(sl)]);}}}r_=sj;}else{r_=g.ofArray([((((((rC(rp))(rt))(rx))(rB))(true))({$:0}))(r7)]);}r9=r_;sm=re.Class;sn=$.New(n,{$:0});so=function(sp){var sq;sq=sp(rf);return g.ofArray([f.Attr().Class(sq)]);};sr=x.Maybe(sn,so,sm);ss=re.Color;st=$.New(n,{$:0});su=function(sv){var sw;sw=sv(rf);return g.ofArray(["background-color: "+sw]);};sx=x.Maybe(st,su,ss);sy=re.Style;sz=$.New(n,{$:0});sA=function(sB){return g.ofArray([sB(rf)]);};sC=x.Maybe(sz,sA,sy);sD=g.append(sx,sC);if(sD.$==0){sF=$.New(n,{$:0});}else{sG=w.reduce(function(sH){return function(sI){return sH+";"+sI;};},sD);sJ=f.Attr();sF=g.ofArray([sJ.NewAttr("style",sG)]);}sE=sF;sK=g.append(sE,r9);sL=g.append(sE,sK);sM=g.append(sr,sL);return f.TR(sM);},RowLayout:function(sN){var sO,sP,sZ=this;sO=this.LayoutUtils;sP=function(){var sR,sS,sT,sU,s6;sR=f.TBody($.New(n,{$:0}));sS=f.Table(g.ofArray([sR]));sT=P.NewElementStore();sU=function(sV){return function(sW){var sX,sY,s0,s1,s2;sX=sW.Element.get_Id();sY=sZ.MakeRow(sN,sV,sW);s0=p(sR.get_Body());s1={contents:0};s2={contents:false};s0.children().each(function(){var s3,s4;s3=p(this);if(sV===s1.contents){p(sY.get_Body()).insertBefore(s3);sY.Render();s4=void(s2.contents=true);}else{s4=null;}return t.Increment(s1);});!s2.contents?sR.AppendI(sY):null;return sT.RegisterElement(sX,function(){return sY["HtmlProvider@33"].Remove(sY.get_Body());});};};s6=function(s7){var s8,s9;s8=_3.Get(s7);while(s8.MoveNext()){s9=s8.get_Current();sT.Remove(s9.Element.get_Id());}return;};return{Body:$.New(c,{Element:sS,Label:{$:0}}),SyncRoot:null,Insert:sU,Remove:s6};};return sO.New(sP);},VerticalAlignedTD:function(s_,s$){var ta,tb,tc,td;ta=s_.$==1?"middle":s_.$==2?"bottom":"top";tb=f.TD(g.ofArray([s$]));tc=tb["HtmlProvider@33"];td=tb.get_Body();tc.SetCss(td,"vertical-align",ta);return tb;},get_Flowlet:function(){var te;te=function(){var tg,th;tg=f.Div($.New(n,{$:0}));th=function(){return function(tj){var tk,tl;tk=tj.Label.$==1?tj.Label.$0.call(null,null):f.Span($.New(n,{$:0}));tl=x.InTable(g.ofArray([g.ofArray([tk,f.Div(g.ofArray([tj.Element]))])]));tg["HtmlProvider@33"].Clear(tg.get_Body());tg.AppendI(tl);return g.ofArray([tl]);};};return{Insert:th,Panel:tg};};return this.MakeLayout(te);},get_Horizontal:function(){return this.ColumnLayout(_0.get_Default());},get_Vertical:function(){return this.RowLayout(_0.get_Default());}},{New:function(tm){var tn;tn=$.New(this,{});tn.LayoutUtils=tm;return tn;}}),Utils:{InTable:function(to){var tp,tu,tv;tp=function(tq){var tr,tt;tr=function(ts){return f.TD(g.ofArray([ts]));};tt=g.map(tr,tq);return f.TR(tt);};tu=g.map(tp,to);tv=f.TBody(tu);return f.Table(g.ofArray([tv]));},MapOption:function(tw,tx){var ty,tz;if(tx.$==1){tz=tx.$0;ty={$:1,$0:tw(tz)};}else{ty={$:0};}return ty;},Maybe:function(tA,tB,tC){var tD,tE;if(tC.$==0){tD=tA;}else{tE=tC.$0;tD=tB(tE);}return tD;}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Formlets);c=$.Safe(b.Body);d=$.Safe(a.Html);e=$.Safe(d.Client);f=$.Safe(e.Default);g=$.Safe(a.List);h=$.Safe(b.Controls);i=$.Safe($$.IntelliFactory.Reactive);j=$.Safe(i.HotStream);k=$.Safe($$.IntelliFactory.Formlets);l=$.Safe(k.Base);m=$.Safe(l.Result);n=$.Safe(g.T);o=$.Safe(e.Operators);p=$.Safe($$.jQuery);q=$.Safe(e.EventsPervasives);r=$.Safe(b.Data);s=$.Safe(b.Formlet);t=$.Safe(a.Operators);u=$.Safe(b.CssConstants);v=$.Safe($$.Math);w=$.Safe(a.Seq);x=$.Safe(b.Utils);y=$.Safe(l.Tree);z=$.Safe(y.Edit);A=$.Safe(l.Form);B=$.Safe(a.Arrays);C=$.Safe(a.IntrinsicFunctionProxy);D=$.Safe(l.FormletProvider);E=$.Safe(r.Formlet);F=$.Safe(e.Pagelet);G=$.Safe(a.Util);H=$.Safe(b.LayoutProvider);I=$.Safe(l.LayoutUtils);J=$.Safe(i.Reactive);K=$.Safe(l.Validator);L=$.Safe(r.ValidatorProvidor);M=$.Safe($$.RegExp);N=$.Safe(a.Collections);O=$.Safe(N.Dictionary);P=$.Safe(b.ElementStore);Q=$.Safe(b.Enhance);R=$.Safe(Q.FormButtonConfiguration);S=$.Safe(Q.FormContainerConfiguration);T=$.Safe(Q.Padding);U=$.Safe(Q.ManyConfiguration);V=$.Safe(Q.ValidationFrameConfiguration);W=$.Safe(Q.ValidationIconConfiguration);X=$.Safe($$.JSON);Y=$.Safe(b.FormletBuilder);Z=$.Safe(b.Layout);_0=$.Safe(Z.FormRowConfiguration);_1=$.Safe(Z.LabelConfiguration);_2=$.Safe(Z.Padding);return _3=$.Safe(a.Enumerator);});$.OnLoad(function(){$.Inherit(E,F);s.Do();r.Validator();r.RX();r.Layout();r.DefaultLayout();u.InputTextClass();return;});}());
